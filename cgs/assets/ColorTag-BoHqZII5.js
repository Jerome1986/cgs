import{r as s,X as E,b as e,w as t,e as D,f as L,g as u,ag as M,ah as U,L as F,p as S,m as w,a0 as I,q as y,o as b,a2 as R,Z as j,a3 as q,c as A,a4 as W,a5 as X,ai as Z,i as z,a7 as G,a8 as H,a9 as J,aa as K,ab as O,W as Q}from"./index-jHQwErwV.js";/* empty css                        *//* empty css                      */import{P as Y}from"./pageContainer-qlUKgolJ.js";/* empty css                     *//* empty css                 */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css                   *//* empty css                     */import{b as ee,c as oe,e as ae,f as le}from"./tag-q5XYjXzV.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./request-Bf4HgDwi.js";const te={class:"channelEdit"},ne={class:"color-container"},se={class:"add-color"},re={key:0,class:"color-value"},ie={class:"dialog-footer"},ce={__name:"ChannelEdit",emits:["success"],setup(T,{expose:g,emit:r}){const i=s(!1),a=s({_id:null,color:""}),f=s({color:[{required:!0,message:"请选择颜色",trigger:"change"}]});g({open:d=>{i.value=!0,a.value={...d}}});const h=r,C=s(null),k=async()=>{try{if(await C.value.validate(),!a.value.color){y.warning("请选择颜色");return}a.value._id?await oe(a.value._id,a.value.color):await ee(a.value.color),y({type:"success",message:a.value._id?"更新成功":"添加成功"}),i.value=!1,h("success")}catch(d){console.error("提交失败:",d),y.error(d.message||"提交失败")}};return(d,n)=>{const x=U,o=L,l=D,p=S,m=I;return b(),E("div",te,[e(m,{modelValue:i.value,"onUpdate:modelValue":n[2]||(n[2]=_=>i.value=_),title:a.value._id?"编辑颜色":"添加颜色",width:"30%"},{footer:t(()=>[u("span",ie,[e(p,{onClick:n[1]||(n[1]=_=>i.value=!1)},{default:t(()=>n[3]||(n[3]=[w("取消")])),_:1}),e(p,{type:"primary",onClick:k},{default:t(()=>n[4]||(n[4]=[w(" 确认 ")])),_:1})])]),default:t(()=>[e(l,{ref_key:"formRef",ref:C,model:a.value,rules:f.value,"label-width":"100px",style:{"padding-right":"30px"}},{default:t(()=>[e(o,{label:"选择颜色",prop:"color"},{default:t(()=>[u("div",ne,[u("div",se,[e(x,{modelValue:a.value.color,"onUpdate:modelValue":n[0]||(n[0]=_=>a.value.color=_),"show-alpha":"","color-format":"hex"},null,8,["modelValue"]),a.value.color?(b(),E("span",re,"已选: "+F(a.value.color),1)):M("",!0)])])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}},de=V(ce,[["__scopeId","data-v-a4fd9595"]]),ue={class:"addCate"},pe={style:{"margin-top":"20px"}},me={__name:"ColorTag",setup(T){const g=s(),r=s({pagesNum:1,pagesSize:10}),i=s(0),a=s(!1),f=s([]),v=async()=>{const o=await ae();console.log("颜色标签",o.data),f.value=o.data.list,i.value=o.data.total},h=()=>{console.log("添加"),g.value.open({})},C=o=>{console.log("编辑",o),g.value.open(o)},k=async o=>{console.log("删除",o),Q.confirm("确定要删除此标签吗?").then(async()=>{const l=await le(o._id);console.log("删除返回",l),l.code===200&&(y.success(l.message),await v())}).catch(()=>{})},d=o=>{r.value.pagesSize=o},n=o=>{r.value.pagesNum=o},x=async()=>{console.log("成功提交"),await v()};return R(()=>{v()}),(o,l)=>{const p=S,m=X,_=J,N=W,B=O,$=K;return b(),E(j,null,[e(Y,{title:"属性标签"},{extra:t(()=>[u("div",ue,[e(p,{type:"primary",onClick:h},{default:t(()=>l[2]||(l[2]=[w("添加颜色")])),_:1})])]),default:t(()=>[l[3]||(l[3]=u("div",{class:"header"},null,-1)),q((b(),A(N,{data:f.value,style:{width:"100%"}},{empty:t(()=>[e(_,{description:"没有数据"})]),default:t(()=>[e(m,{label:"序号",align:"center",width:"100",type:"index"}),e(m,{label:"颜色",align:"center",prop:"bgc"},{default:t(({row:c})=>[u("div",{class:"color-block",style:Z({backgroundColor:c.color})},null,4)]),_:1}),e(m,{label:"色值",align:"center",prop:"color"}),e(m,{label:"操作",align:"center",width:"180"},{default:t(({row:c})=>[e(p,{icon:z(G),circle:"",plain:"",type:"primary",onClick:P=>C(c)},null,8,["icon","onClick"]),e(p,{icon:z(H),circle:"",plain:"",type:"danger",onClick:P=>k(c)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[$,a.value]]),u("div",pe,[e(B,{style:{"margin-top":"20px","justify-content":"flex-end"},"current-page":r.value.pagesNum,"onUpdate:currentPage":l[0]||(l[0]=c=>r.value.pagesNum=c),"page-size":r.value.pagesSize,"onUpdate:pageSize":l[1]||(l[1]=c=>r.value.pagesSize=c),"page-sizes":[1,5,10,15],layout:"jumper,total, sizes, prev, pager, next ",total:i.value,onSizeChange:d,onCurrentChange:n},null,8,["current-page","page-size","total"])])]),_:1}),e(de,{ref_key:"dialog",ref:g,onSuccess:x},null,512)],64)}}},Se=V(me,[["__scopeId","data-v-72f8b70e"]]);export{Se as default};
