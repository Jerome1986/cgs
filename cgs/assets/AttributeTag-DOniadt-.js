import{r as u,X as k,o as E,b as e,w as o,e as L,f as $,h as U,g as y,p as w,m as h,a0 as M,q as z,a2 as P,Z as D,a3 as F,c as I,a4 as R,a5 as j,i as V,a7 as q,a8 as W,a9 as X,aa as Z,ab as G,W as H}from"./index-Dq5YoMTe.js";/* empty css                        *//* empty css                      */import{P as J}from"./pageContainer-BnKbueKC.js";/* empty css                     *//* empty css                 */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css                   *//* empty css                     */import{u as K,a as O,g as Q,d as Y}from"./tag-DOBcQgzI.js";import"./request-CjAdyTqz.js";import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ae={class:"subChannelEdit"},te={class:"dialog-footer"},le={__name:"ChannelEdit",emits:["success"],setup(T,{expose:s,emit:c}){const i=u(!1),t=u({_id:null,name:"",en_name:""}),_=u([]);s({open:f=>{i.value=!0,t.value={...f}}});const C=c,v=u(null),x=async()=>{await v.value.validate(),console.log("表单",t.value),t.value._id&&await K(t.value),t.value._id||await O(t.value.name,t.value.en_name),z({type:"success",message:t.value._id?"更新成功":"添加成功"}),i.value=!1,C("success")};return(f,l)=>{const b=U,a=$,n=L,d=w,p=M;return E(),k("div",ae,[e(p,{modelValue:i.value,"onUpdate:modelValue":l[3]||(l[3]=r=>i.value=r),title:t.value._id?"编辑标签":"添加标签",width:"30%"},{footer:o(()=>[y("span",te,[e(d,{onClick:l[2]||(l[2]=r=>i.value=!1)},{default:o(()=>l[4]||(l[4]=[h("取消")])),_:1}),e(d,{type:"primary",onClick:x},{default:o(()=>l[5]||(l[5]=[h(" 确认 ")])),_:1})])]),default:o(()=>[e(n,{ref_key:"formRef",ref:v,model:t.value,rules:_.value,"label-width":"100px",style:{"padding-right":"30px"}},{default:o(()=>[e(a,{label:"标签名称",prop:"name"},{default:o(()=>[e(b,{modelValue:t.value.name,"onUpdate:modelValue":l[0]||(l[0]=r=>t.value.name=r),minlength:"1",maxlength:"10"},null,8,["modelValue"])]),_:1}),e(a,{label:"标签英文",prop:"cate_alias"},{default:o(()=>[e(b,{modelValue:t.value.en_name,"onUpdate:modelValue":l[1]||(l[1]=r=>t.value.en_name=r),minlength:"1",maxlength:"15"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}},ne={class:"addCate"},oe={style:{"margin-top":"20px"}},se={__name:"AttributeTag",setup(T){const s=u({pagesNum:1,pageSize:10}),c=u(0),i=u(),t=u(!1),_=u([]),g=async()=>{const a=await Q();console.log(a.data),_.value=a.data.list,c.value=a.data.total},C=()=>{i.value.open({})},v=a=>{console.log("编辑",a),i.value.open(a)},x=a=>{console.log("删除",a),H.confirm("确定要删除此标签吗?").then(async()=>{const n=await Y(a._id);n.code===200&&(z.success(n.message),await g())}).catch(()=>{})},f=a=>{s.value.pagesNum=a},l=a=>{s.value.pageSize=a,s.value.pagesNum=1},b=()=>{console.log("提交成功"),g()};return P(()=>{g()}),(a,n)=>{const d=w,p=j,r=X,S=R,A=G,N=Z;return E(),k(D,null,[e(J,{title:"属性标签"},{extra:o(()=>[y("div",ne,[e(d,{type:"primary",onClick:C},{default:o(()=>n[2]||(n[2]=[h("添加标签")])),_:1})])]),default:o(()=>[n[3]||(n[3]=y("div",{class:"header"},null,-1)),F((E(),I(S,{data:_.value,style:{width:"100%"}},{empty:o(()=>[e(r,{description:"没有数据"})]),default:o(()=>[e(p,{label:"序号",align:"center",width:"100",type:"index"}),e(p,{label:"标签名称",align:"center",prop:"name"}),e(p,{label:"标签英文",align:"center",prop:"en_name"}),e(p,{label:"操作",align:"center",width:"180"},{default:o(({row:m})=>[e(d,{icon:V(q),circle:"",plain:"",type:"primary",onClick:B=>v(m)},null,8,["icon","onClick"]),e(d,{icon:V(W),circle:"",plain:"",type:"danger",onClick:B=>x(m)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[N,t.value]]),y("div",oe,[e(A,{style:{"margin-top":"20px","justify-content":"flex-end"},"current-page":s.value.pagesNum,"onUpdate:currentPage":n[0]||(n[0]=m=>s.value.pagesNum=m),"page-size":s.value.pageSize,"onUpdate:pageSize":n[1]||(n[1]=m=>s.value.pageSize=m),"page-sizes":[1,5,10,15],layout:"jumper,total, sizes, prev, pager, next ",total:c.value,onSizeChange:l,onCurrentChange:f},null,8,["current-page","page-size","total"])])]),_:1}),e(le,{ref_key:"dialog",ref:i,onSuccess:b},null,512)],64)}}},Ce=ee(se,[["__scopeId","data-v-ed33dd03"]]);export{Ce as default};
