import{r,a2 as V,c as h,w as p,o as b,a3 as T,g as B,a4 as G,b as t,a5 as P,a9 as k,aa as L,ab as M,h as U,i as j,ac as D,p as O,m as I}from"./index-Dq5YoMTe.js";/* empty css                        *//* empty css                      */import{P as R}from"./pageContainer-BnKbueKC.js";/* empty css                     *//* empty css                 */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  */import{i as f}from"./request-CjAdyTqz.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const q=(i,m)=>f.get("/user-order-get",{params:{page:i,pageSize:m}}),A=i=>f.post("/user-order-search",{searchValue:i}),F={style:{"margin-top":"20px"}},ae={__name:"orderManage",setup(i){const m=r(!1),_={0:"未支付",1:"支付成功",2:"支付失败"},a=r({pagesNum:1,pageSize:10}),v=r(0),d=r([]),u=async(n,e)=>{const l=await q(n,e);console.log(l),v.value=l.data.total,d.value=l.data.list.map(g=>({...g,statusText:_[g.status]||"未知状态"}))},c=r(""),x=async()=>{const n=await A(c.value);d.value=n.data.map(e=>({...e,statusText:_[e.status]||"未知状态"}))},y=()=>{c.value||u()},z=n=>{a.value.pagesNum=n,u(a.value.pagesNum,a.value.pageSize)},C=n=>{a.value.pageSize=n,a.value.pagesNum=1,u(a.value.pagesNum,a.value.pageSize)};return V(()=>{u()}),(n,e)=>{const l=U,g=O,o=P,N=k,S=G,w=M,E=L;return b(),h(R,{title:"订单管理"},{extra:p(()=>[t(l,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=s=>c.value=s),style:{width:"240px","margin-right":"20px"},placeholder:"根据订单号/用户名查询订单","prefix-icon":j(D),clearable:"",onChange:y},null,8,["modelValue","prefix-icon"]),t(g,{type:"primary",onClick:x},{default:p(()=>e[3]||(e[3]=[I("查询")])),_:1})]),default:p(()=>[T((b(),h(S,{data:d.value,style:{width:"100%"}},{empty:p(()=>[t(N,{description:"没有数据"})]),default:p(()=>[t(o,{label:"序号",sortable:"",align:"center",width:"100",type:"index"}),t(o,{label:"订单号",align:"center",prop:"payment_id"}),t(o,{label:"订单金额",sortable:"",align:"center",prop:"amount"}),t(o,{label:"订单类型",align:"center",prop:"recharge_type"}),t(o,{label:"支付状态",align:"center",prop:"statusText"}),t(o,{label:"产品信息",align:"center",prop:"product_name"}),t(o,{label:"用户名",align:"center",prop:"username"})]),_:1},8,["data"])),[[E,m.value]]),B("div",F,[t(w,{style:{"margin-top":"20px","justify-content":"flex-end"},"current-page":a.value.pagesNum,"onUpdate:currentPage":e[1]||(e[1]=s=>a.value.pagesNum=s),"page-size":a.value.pageSize,"onUpdate:pageSize":e[2]||(e[2]=s=>a.value.pageSize=s),"page-sizes":[1,5,10,15],layout:"jumper,total, sizes, prev, pager, next ",total:v.value,onSizeChange:C,onCurrentChange:z},null,8,["current-page","page-size","total"])])]),_:1})}}};export{ae as default};
