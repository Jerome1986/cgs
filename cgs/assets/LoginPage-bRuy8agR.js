import{u as y,r as u,c as I,w as o,E as B,a as C,o as F,b as e,d as L,e as U,f as q,g as f,h as N,i as _,j as P,l as R,k as S,m,n as j,p as z,q as M}from"./index-Dq5YoMTe.js";/* empty css                     *//* empty css                  *//* empty css                 */import{i as T}from"./request-CjAdyTqz.js";import{_ as h}from"./_plugin-vue_export-helper-DlAUqK2U.js";const A=l=>T({method:"post",url:"/user-login",data:{username:l.username,password:l.password}}),D={class:"flex"},G={__name:"LoginPage",setup(l){const p=y(),g=C(),d=u(),a=u({username:"",password:""}),w=u({username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:6,max:12,message:"用户名是6-12位",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码最小位6位数",trigger:"blur"}]}),x=async()=>{await d.value.validate();try{const r=await A(a.value);if(console.log(r),p.setUserInfo(r.data),p.userInfo.role!=="admin")return{code:401,message:"当前用户没有权限"};M.success("登录成功")}catch(r){console.log(r,"我是错误")}await g.push("/")};return(r,s)=>{const i=L,t=q,c=N,b=S,v=j,k=z,E=U,V=B;return F(),I(V,{class:"login-page"},{default:o(()=>[e(i,{span:12,class:"bg"}),e(i,{span:6,offset:3,class:"form"},{default:o(()=>[e(E,{ref_key:"form",ref:d,model:a.value,rules:w.value,size:"large",autocomplete:"off"},{default:o(()=>[e(t,{prop:"title"},{default:o(()=>s[2]||(s[2]=[f("h1",null,"登录",-1)])),_:1}),e(t,{prop:"username"},{default:o(()=>[e(c,{modelValue:a.value.username,"onUpdate:modelValue":s[0]||(s[0]=n=>a.value.username=n),name:"username","prefix-icon":_(P),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),e(t,{prop:"password"},{default:o(()=>[e(c,{modelValue:a.value.password,"onUpdate:modelValue":s[1]||(s[1]=n=>a.value.password=n),name:"password","prefix-icon":_(R),type:"password",placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),e(t,{class:"flex"},{default:o(()=>[f("div",D,[e(b,null,{default:o(()=>s[3]||(s[3]=[m("记住我")])),_:1}),e(v,{type:"primary",underline:!1},{default:o(()=>s[4]||(s[4]=[m("忘记密码？")])),_:1})])]),_:1}),e(t,null,{default:o(()=>[e(k,{class:"button",type:"primary","auto-insert-space":"",onClick:x},{default:o(()=>s[5]||(s[5]=[m("登录")])),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})}}},X=h(G,[["__scopeId","data-v-797b3c69"]]);export{X as default};
